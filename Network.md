## 计算机网络
<span id = "home"></span>
#### 目录
1. [协议体系模型](#network_arch)
2. [物理层](#network_physical_layer)
3. [数据链路层](#network_data_link_layer)
4. [网络层](#network_network_layer)
5. [运输层](#network_transport_layer)
6. [应用层](#network_application_layer)

----

<span id = "network_arch"></span>
#### 协议体系模型 [(TOP)](#home)
![](https://github.com/yinfork/Android-Interview/blob/master/res/network/network_arch.png?raw=true)

----

<span id = "network_physical_layer"></span>
#### 物理层 [(TOP)](#home)
1. 概述
	1. 作用<br>
		**物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。**
	
	2. 细节<br>
		使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。<br>
	
	3. 数据单位<br>
		在物理层上所传送的数据单位是比特。

2. 传输方向的工作方式
	1. 单工：只能有一个方向的通信而没有反方向的交互。
	2. 半双工：通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
	3. 全双工：通信的双方可以同时发送和接收信息。

3. 信号
	1. 基带信号<br>
		来自信源的信号。指没有经过调制的数字信号或模拟信号。
		1. 曼彻斯特编码信号<br>
			每个原始信号码元固定用两个连续极性相反的脉冲来表示,1码用正、负电平表示(也就是先正后负,对应的编码为10)，0码用负、正电平表示(也就是先负后正,对应的编码为01)。其关键特点就是在每个码元的1/2码元位置必须进行极性跳变
			1. 优点: **每一位的中间有一跳变，位中间的跳变既作时钟信号，又作数据信号，所以具有自同步能力和良好的抗干扰性能。**
			2. 缺点: 每一个码元都被调成两个电平，所以编码效率50%
			
		2. 差分曼彻斯特编码<br>
			编码规则：对于二进制信号中的第一个码元与曼彻斯特的转换方式一样，都是在1/2码元时进行电平极性跳变,即把0码转换成01码,把1码转换成10码；后面的信号码就根据以下两条规则跳变：如果本码为1,开始处的电平不跳变；如果本码为0,开始处的电平必须跳变。<br>
			**相比曼彻斯特编码，可以解决当极性反转时引起的译码错误。**
			1. 优点: 收发双方可以根据编码自带的时钟信号来保持同步，无需专门传递同步信号的线路
			2. 缺点: 每一个码元都被调成两个电平，所以编码效率50%

		3. 不归零码<br>
			信号电平由0、1表示，并且在表示完一个码元后，电压不需回到0	。常见有CMI码
			
		4. 例子<br>
			![](https://github.com/yinfork/Android-Interview/blob/master/res/network/manchester_encoding.jpg?raw=true)
			
	2. 宽带信号<br>
		指将基带信号调制后形成频分复用模拟信号。

4. 物理层之下的传输媒体
	1. 双绞线
	2. 同轴电缆
	3. 光缆		

5. 信道复用技术<br>
	通信线路的架设费用较高，需要尽可能地充分使用每个信道的容量，尽可能不重复建设通信线路
	1. 频分复用FDM<br>
		ADSL技术采用频分复用技术把普通的电话线分成了电话、上行和下行三个相对独立的信道，从而避免了相互之间的干扰。用户可以边打电话边上网，不用担心上网速率和通话质量下降的情况。
	2. 时分复用TDM
	3. 码分多址CDMA：每个用户可以在同样的时间使用同样的频带进行通信。

6. 调制器和解调器
	1. 调制器：基带数字信号波形转为模拟信号的波形
	2. 解调器：将经过调制器变换的模拟信号恢复成原来的数字信号

7. 常用单位
	1. 带宽（bandwidth）<br>
		在计算机网络中，表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。常用来表示网络的通信线路所能传送数据的能力。单位是“比特每秒”，记为b/s。
	2. 码元（code）<br>
		在使用时间域（或简称为时域）的波形来表示数字信号时，代表不同离散数值的基本波形。
	3. 信噪比（signal-to-noise ratio ）<br>
		指信号的平均功率和噪声的平均功率之比，记为S/N。信噪比（dB）=10*log10（S/N）
	4. 比特率（bit rate ）
		单位时间（每秒）内传送的比特数。

8. 定理
	1. 奈氏准则<br>
		理想低通信道最高码元传输速率 = 2W Baud（即每赫兹理想低通信道最高码元传输速率每秒2个码元）		
	2. 香农定理<br>
		信道的极限传输速率C = Wlog2(1+S/N)，W为带宽，S为平均功率，N为高斯噪声功率，S/N也称为信噪比
	3. 采样定理<br>	
		只要采样频率不低于电话信号最高频率的2倍，就可以从采样脉冲信号无失真地恢复出原来的电话信号。

9. 参考
	1. 	https://zhuanlan.zhihu.com/p/52248268
	2. https://github.com/Snailclimb/JavaGuide/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md#%E5%85%AB-http%E9%95%BF%E8%BF%9E%E6%8E%A5%E3%80%81%E7%9F%AD%E8%BF%9E%E6%8E%A5
	3. https://github.com/it-interview/EasyJob/blob/master/Network/network.md
	4. https://github.com/Snailclimb/JavaGuide/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1/%E5%B9%B2%E8%B4%A7%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93.md

----

<span id = "network_data_link_layer"></span>
#### 数据链路层 [(TOP)](#home)
1. 概述<br>
	1. 作用<br>
		**在原始的、有差错的物理传输线路的基础上，采取差错检测，差错控制和流量控制等方法，将有差错的物理线路改进成逻辑上的无差错的数据链路，以便向他的上一层网络层提供透明可靠的数据传输服务。**
	
	2. 细节<br>
		在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。 控制信息还使接收端能够检测到所收到的帧中有误差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。如果需要改正数据在链路层传输时出现差错（这就是说，数据链路层不仅要检错，而且还要纠错），那么就要采用可靠性传输协议来纠正出现的差错。这种方法会使链路层的协议复杂些。
	3. 数据单位<br>
		数据链路层传输的协议数据单元是帧
	
	4. 为什么要封装成帧<br>
		物理层数据是一位一位单独传输的，传输效率低，而且容易出现数据传输差错，通过数据链路层把数据进行封装成以帧为单位进行传输，可以提高传输效率，而且还能做数据传输差错控制。
	
	5. 与物理层的区别<br>
		物理层和数据链路层的本质作用都是用来构建网络通信、访问通道，但它们所建立的通信通道是不一样的。在物理层上构建的是物理链路，在数据链路层上构建的是逻辑链路或者数据链路。

2. 链路层基本需要实现的功能
	1. 数据链路管理<br>
		**TODO**
	
	2. 封装成帧<br>
		在网络层传输的包（packet，又称分组），放在数据链路层中传输的是“帧”(frame)。数据包到达数据链路层后加上数据链路层的协议头和协议尾就构成了一个数据帧。在每个帧的前部加上一个帧头部，在帧的结尾处加上一个帧尾部，把网络层的数据包作为帧的数据部分，就构成了一个完整帧。帧头和帧尾就是作为帧的起始和结束标志，也就是帧边界
		<br>
		<img src="https://github.com/yinfork/Android-Interview/blob/master/res/network/data_link_frame.png?raw=true" width = "100px" height = "100px" />
		
		<br><br>
		**帧边界**<br>
		帧的数据部分的上限 <= MTU（最大传输单元）<br>
		MTU指帧中数据部分但不包括帧头和帧尾部分，同时，帧还有最小大小限制，如果封装的 IP 包小于最小帧要求时，就要用一些特殊字符进行填充
		
	3. 透明传输<br>
		指要使在数据链路层上所传输的数据在内容、格式及编码上都没有限制，也就是要使一些本来用于特殊用途的控制字符也能像正常的数据一样传输
		
	4. 差错控制
		1. 概念<br>
			为保证数据的正确传输。要实现差错控制须具备两种能力：
			1. 发现差错的能力
			2. 纠正错误的能力；
		2. 差错检测	<br>
			在数据链路层检测数据传输错误的方法-~般是通过对差错编码进行校验来实现，常见的校验方法有：
			1. 奇偶校验码(PPC)<br>
				1. 思想<br>
					原信息代码的最后添加一位用于奇校验或偶校验的代码,根据被传输的一组二进制代码的数位中“1”的个数是奇数或偶数来进行校验的。采用“1”的奇数个校验的方法称为奇校验，反之称为偶校验
				2. 缺点<br>
					奇偶校验方法只可以用来检査单个码元错误,检错能力较差,所以一般只用于本身误码率较低的环境,如用于以太局域网中、用于磁盘的数据存储中等
				
			2. 循环冗余校验(CRC)
				1. 思想<br>
					先在要发送的帧后面附加一个数，这个附加的数不是随意的，它要使加上这个数后所生成的新帧能与发送端和接收端共同选定的某个特定数整除（采用模2除法）。<br>
					到达接收端后，再把接收到的新帧除以（同样采用模2除法）这个选定的除数。因为在发送端发送数据帧之前就已附加了一个数，做了去余处理（也就已经能整除了），所以结果应该没有余数。如果有余数，则表明该帧在传输过程中出现了差错。
				2. 模2除法<br>
					与算术除法类似、但它既不向上位借位，也不比较除数和被除数的相同位数值的大小，只以相同位数进行相除。
				3. CRC校验码的计算示例<br>
					**TODO**<br>
					可参考：https://zhuanlan.zhihu.com/p/52665008
		3. 差错纠正<br>	
			**TODO**<br>
			可参考：https://zhuanlan.zhihu.com/p/52665008


3. 协议
	1. 点对点协议PPP<br>
		PPP是数据链路层使用最多的一种协议，它的特点是：简单，只检测差错而不去纠正差错，不使用序号，也不进行流量控制，可同时支持多种网络层协议。如我们在使用 Modem 进行拨号连接时就需要用到它，路由器设备间的 Serial 口之间的连接也要封装这个协议
	2. PPPoE是为宽带上网的主机使用的链路层协议

4. 网络设备
	1. 计算机网卡
	2. 网桥
	3. 二层交换机（注意是二层）

5. 参考
	1. https://zhuanlan.zhihu.com/p/52665008
	2. https://github.com/it-interview/EasyJob/blob/master/Network/network.md
	3. https://github.com/Snailclimb/JavaGuide/blob/master/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.md#%E5%85%AB-http%E9%95%BF%E8%BF%9E%E6%8E%A5%E3%80%81%E7%9F%AD%E8%BF%9E%E6%8E%A5 

----

<span id = "network_network_layer"></span>
#### 网络层 [(TOP)](#home)
TODO

----

<span id = "network_transport_layer"></span>
#### 运输层 [(TOP)](#home)
TODO

----

<span id = "network_application_layer"></span>
#### 应用层 [(TOP)](#home)
1. 定义<br>
	通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。

2. 常见协议
	1. Http
	2. DNS 

3. Http协议详解



